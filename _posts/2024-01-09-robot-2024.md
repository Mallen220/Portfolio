---
layout: post
title:  "Broncobots 2024 Robot"
summary: "The 2024 Broncobots robot, built for the 2024 FRC game 'Crescendo'."
author: MatthewAllen
date: '2024-01-09 0:00:00 +0530'
category: ['Java', 'FRC_SDK']
thumbnail: /assets/img/projects/2024robot.png
keywords: devlopr jekyll, how to use devlopr, devlopr, how to use devlopr-jekyll, devlopr-jekyll tutorial,best jekyll themes, multi languages and tags
usemathjax: true
permalink: /projects/robot-2024/
github_url: "https://github.com/FRCTeam1987/Robot2024"
pagination:
  enabled: true
  collection: projects
---

### Project Description
**Shockwave** is the 2024 competition robot for FRC Team 1987 (Broncobots), designed for the *FIRST Robotics Competition* game **Crescendo**. As a programming lead, I developed the robot's software stack, focusing on autonomous navigation, precision scoring, and real-time sensor fusion. The robot features a highly agile swerve drive, a differential shooter for spin-stabilized notes, and a rapid elevator/climber system, enabling it to excel in scoring, climbing, and defensive play. The software integrates advanced path planning, computer vision, and closed-loop control to maximize performance in competitive matches.

---

### Key Features
1. **Omnidirectional Mobility**:
    - MK4i L3 swerve modules with Kraken motors (18.9 ft/s top speed).
    - Magnetic encoders + CANCoders for precise steering feedback.
2. **Differential Shooter**:
    - Independently controlled flywheels induce spin on notes for aerodynamic stability.
    - 120° wrist with herringbone gearing to eliminate backlash.
3. **Elevator/Climber**:
    - Two-stage belt-in-tube design with Kevlar reinforcement.
    - Lifts the robot in 0.87 seconds for endgame climbing.
4. **Vision System**:
    - Four Limelight cameras (2x 3G, 2x 3) for AprilTag detection and pose estimation.
    - Multi-camera fusion for robust field localization.
5. **Autonomous Routines**:
    - Path Planner for dynamic trajectory generation.
    - Note collection, scoring sequences, and trap scoring.

---

### Technical Implementation
#### Core Functionality:
- **Swerve Drive**:
    - Closed-loop velocity/position control using TalonFX motor controllers.
    - Field-oriented driving with automatic path correction.
- **Shooter Control**:
    - RPM-based PID control with feedforward compensation.
    - Dynamic wrist angle interpolation for variable-distance shots.
- **Vision Integration**:
    - Fused odometry using encoder data + AprilTag detections.
    - Pose estimation with confidence-based outlier rejection.
- **Automated Sequences**:
    - One-button shooting (amp, speaker, trap).
    - Auto-align to targets using vision feedback.

#### Technical Stack:
- **Languages**: Java (WPILib framework).
- **Libraries**:
    - CTRE Phoenix 6 (motor control).
    - PathPlanner (autonomous pathing).
    - LimelightHelpers (vision processing).
    - Shuffleboard (real-time telemetry).
- **Control Systems**:
    - PID + Motion Magic for elevator/wrist positioning.
    - State machines for note handling (intake → store → shoot).
- **Sensors**:
    - Beam breaks (note detection).
    - Proximity sensors (amp alignment).
    - Gyroscope (heading stabilization).

---

### Key Advantages
1. **Speed**:
    - Achieves scoring cycles in under 3 seconds via parallelized commands.
2. **Accuracy**:
    - Vision-aided shooting (≤1.5° heading error).
    - Auto-ranging for speaker/amp shots using distance interpolation.
3. **Resilience**:
    - Dynamic path replanning during autonomous.
    - Sensor redundancy (4 cameras + encoder fusion).
4. **Operator Efficiency**:
    - Custom driver interface with single-button complex actions (e.g., climb sequence).

---

### Special Notes
- **Awards**: Two-time **Innovation in Control Award** winner for software excellence.
- **Performance**: Ranked **4/65** in Missouri, **93/2813** nationally.
- **Challenges Overcome**:
    - Compensating for mechanical backlash in the wrist using herringbone gears.
    - Handling vision latency in high-speed autonomous routines.
- **Code Philosophy**:
    - Emphasized readability with modular commands (e.g., `ShootSubwoofer`, `DriveToNote`).
    - Robust error handling (e.g., reverting to encoder odometry if vision fails).

---

**Impact**: The software enabled **Shockwave** to score 1792 EPA points with a 64% win rate, demonstrating the effectiveness of its integrated control systems in high-pressure competition environments.